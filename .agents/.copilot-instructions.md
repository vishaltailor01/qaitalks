# GitHub Copilot Instructions for QAi Talks

This file provides instructions for GitHub Copilot agents to optimize code generation for the QAi Talks project.

## Project Overview
- **Name:** QAi Talks - Educational platform for AI and technology education
- **Tech Stack:** Next.js 16, React 19, TypeScript, Tailwind CSS, Prisma, PostgreSQL/SQLite
- **Hosting:** Cloudflare Pages (primary), Vercel (backup)
- **Testing:** Playwright E2E + Jest unit tests

## Code Generation Guidelines

### 1. Architecture & Structure
- **Frontend:** Next.js App Router with Server Components + Client Components
- **Backend:** API routes in `app/api/`
- **Database:** Prisma ORM with SQLite (dev), PostgreSQL (prod)
- **Components:** Organized in `ui/` (atomic), `layout/`, `sections/`
- **Utilities:** Type-safe functions in `lib/`

### 2. Technology Constraints
- **React:** Version 19+ only, use Server Components by default
- **TypeScript:** Strict mode enabled, always define types
- **CSS:** Tailwind CSS utility classes ONLY (no custom CSS)
- **Forms:** zod for schema validation
- **Auth:** NextAuth.js v5 with OAuth providers
- **Testing:** Playwright for E2E, Jest for unit tests

### 3. Naming Conventions
- **Components:** PascalCase (e.g., `UserCard.tsx`)
- **Utilities:** camelCase (e.g., `formatDate.ts`)
- **Types/Interfaces:** PascalCase (e.g., `UserProfile`)
- **Constants:** UPPER_SNAKE_CASE (e.g., `MAX_FILE_SIZE`)
- **Files:** kebab-case for directories (e.g., `blog-posts/`)

### 4. Code Quality Standards
- **TypeScript:** No `any` types unless unavoidable. Use strict null checks.
- **Imports:** Group imports (React, Next.js, third-party, local) with blank lines
- **Props:** Always define TypeScript interface for component props
- **Exports:** Prefer named exports for utilities, default for components
- **Comments:** JSDoc for complex functions, inline for business logic
- **Error Handling:** Try-catch for async operations, proper error messages

### 5. File Structure
```
next-app/
├── app/
│   ├── (auth)/           # Auth-related pages
│   ├── api/              # Backend API routes
│   ├── blog/             # Blog pages and routes
│   ├── curriculum/       # Course/curriculum pages
│   ├── dashboard/        # Dashboard pages
│   ├── layout.tsx        # Root layout with metadata
│   ├── page.tsx          # Homepage
│   └── globals.css       # Global styles
├── components/
│   ├── ui/               # Atomic UI components
│   ├── layout/           # Layout components (Header, Footer, Sidebar)
│   ├── sections/         # Page sections (Hero, Features, Testimonials)
│   └── index.ts          # Exports barrel file
├── lib/
│   ├── auth.ts           # Authentication logic
│   ├── db.ts             # Database client
│   └── utils.ts          # Utility functions
├── __tests__/            # Unit tests
├── e2e/                  # E2E tests (Playwright)
├── prisma/               # Database schema and seeds
└── public/               # Static assets
```

### 6. Database & Prisma
- **Models:** Define in `prisma/schema.prisma`
- **Queries:** Use Prisma Client with proper typing
- **Validation:** Validate input before database operations
- **Relations:** Use `@relation()` for foreign keys
- **Migrations:** Run `npx prisma migrate dev --name <description>`
- **Optimization:** Use `include` or `select` to prevent N+1 queries

### 7. API Routes
- **Location:** `app/api/[route]/route.ts`
- **Methods:** Export `GET`, `POST`, `PUT`, `DELETE` functions
- **Validation:** Use zod for request validation
- **Error Handling:** Return proper HTTP status codes
- **Response Format:** `{ success, data, error }` or similar
- **Auth:** Check user authentication with NextAuth session

### 8. Component Development
- **Default:** Server Components (fetch data, database queries)
- **Client Components:** Use `"use client"` directive only when needed
- **State Management:** Props over useState when possible
- **Side Effects:** Use useEffect for client-side only
- **Styling:** Tailwind classes, use design tokens
- **Testing:** Write unit tests in `__tests__/components/`

### 9. Form Handling
- **Schema Validation:** Use zod with TypeScript types
- **Client-Side:** React Hook Form or controlled components
- **Server-Side:** Always re-validate on submission
- **Error Display:** Show validation errors inline
- **Accessibility:** Proper label associations, ARIA attributes

### 10. Testing Strategy
- **E2E Tests:** Critical user flows (auth, navigation, forms)
- **Unit Tests:** Components, utilities, API handlers
- **Coverage:** Minimum 50% code coverage
- **Playwright:** Browser automation for realistic testing
- **Jest:** Fast unit tests with React Testing Library
- **Patterns:** Avoid implementation details, test behavior

### 11. Security Requirements
- **Input Validation:** Server-side validation on all endpoints
- **XSS Prevention:** Sanitize user input, no dangerouslySetInnerHTML
- **CSRF Protection:** NextAuth.js handles automatically
- **Secrets:** Use `.env.local` for sensitive values
- **Rate Limiting:** Implement on public API endpoints
- **Headers:** Set CSP, X-Frame-Options, X-Content-Type-Options

### 12. SEO & Accessibility
- **Meta Tags:** Add title, description, Open Graph tags
- **Semantic HTML:** Use proper heading hierarchy
- **Accessibility:** WCAG 2.1 Level AA compliance
- **Images:** Use `<Image>`, lazy loading, descriptive alt text
- **Performance:** Optimize Core Web Vitals
- **Keyboard Navigation:** All interactive elements accessible

### 13. Performance Optimization
- **Images:** Use Next.js Image component with proper sizing
- **Lazy Loading:** Split code and lazy-load components
- **Caching:** Use Next.js caching strategies
- **Database:** Prevent N+1 queries with Prisma
- **Fonts:** Use system fonts or optimize with next/font
- **Bundling:** Keep JavaScript bundle size minimal

## Quick Skills Reference

When you need to generate code for a specific domain, refer to the skill file:

| Skill | Location | Use When |
|-------|----------|----------|
| Development | `.agents/skills/development/SKILL.md` | Adding pages, components, API routes |
| Database | `.agents/skills/database/SKILL.md` | Schema changes, Prisma queries |
| Testing | `.agents/skills/testing/SKILL.md` | Writing tests, test configuration |
| Security | `.agents/skills/security/SKILL.md` | Auth, validation, API security |
| Accessibility | `.agents/skills/accessibility/SKILL.md` | Interactive components, forms |
| SEO | `.agents/skills/seo/SKILL.md` | Meta tags, optimization, performance |
| Design | `.agents/skills/design/SKILL.md` | Styling, design tokens, layouts |

## Common Commands

```bash
# Development
npm run dev              # Start dev server at localhost:3000
npm run build           # Build for production
npm run start           # Start production build

# Testing
npm run test            # Run Jest unit tests
npm run test:watch     # Watch mode
npm run test:e2e       # Run Playwright E2E tests headless
npm run test:e2e:ui    # Interactive Playwright UI
npm run test:e2e:debug # Debug mode

# Database
npx prisma migrate dev --name <name>  # Create migration
npx prisma studio                      # Database GUI
npm run db:seed                        # Seed database

# Linting
npm run lint            # Check code quality
npm run lint:fix        # Auto-fix issues
npm run type-check     # TypeScript check
```

## Video Coding Best Practices

Since this is a video coding project:

1. **Explain Changes:** Comment in code explaining what you're doing
2. **Step-by-Step:** Generate features incrementally, not all at once
3. **Visual Hierarchy:** Create semantic HTML for clear structure
4. **Test-Driven:** Generate tests alongside features
5. **Performance:** Optimize as you code, not after
6. **Documentation:** Update guides as new patterns emerge
7. **Clean Code:** Follow conventions strictly for consistency

## Before Committing

Ensure:
- [ ] TypeScript has no errors: `npm run type-check`
- [ ] Code passes linting: `npm run lint` (fix with `npm run lint:fix`)
- [ ] Unit tests pass: `npm run test`
- [ ] E2E tests pass: `npm run test:e2e`
- [ ] No console errors in dev server
- [ ] Component is properly documented
- [ ] Tests cover new functionality (minimum 50% coverage)

---

**Last Updated:** February 8, 2026  
**For Questions:** Check relevant skill file in `.agents/skills/`
