# Cloudflare Pages Configuration for Next.js with D1 Database
name = "qaitalks"
compatibility_date = "2026-02-06"
pages_build_output_dir = ".open-next/worker"

# Required compatibility flags for Next.js
compatibility_flags = ["nodejs_compat", "streams_enable_constructors"]

# D1 Database - Production
[[d1_databases]]
binding = "DB"
database_name = "qaitalks-db"
database_id = "d1218a37-db81-44a3-9755-58a872f9019e"

# D1 Database - Staging Environment
[[env.staging.d1_databases]]
binding = "DB"
database_name = "qaitalks-db-staging"
database_id = "d6a74ead-6fc2-4cdd-aaad-b01c0297f7cd"

# D1 Database - Preview Environment
[[env.preview.d1_databases]]
binding = "DB"
database_name = "qaitalks-db-preview"
database_id = "d6a74ead-6fc2-4cdd-aaad-b01c0297f7cd"

# Environment variables (add secrets via Cloudflare dashboard)
# Production secrets:
# - NEXTAUTH_SECRET (wrangler pages secret put NEXTAUTH_SECRET)
# - NEXTAUTH_URL (your production domain)
# - DATABASE_URL (production database)
#
# Staging secrets (wrangler pages secret put <NAME> --env staging):
# - NEXTAUTH_SECRET
# - NEXTAUTH_URL (staging domain)
# - DATABASE_URL (staging database)
#
# OAuth Providers (all environments):
# - GITHUB_ID, GITHUB_SECRET
# - GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET
